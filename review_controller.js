const reviewsData = {
    eng: [
        {
            image: "Img/review (1).png",
            text: "Svyatoslav is a teacher who can explain complex things simply! Thanks to his web development lessons, I built my first website from scratch. He doesn't just teach theory but shows how to apply knowledge in practice. Very motivating!",
            name: "Katya, student"
        },
        {
            image: "Img/review (2).png",
            text: "We worked with Svyatoslav on a startup landing page. He considered all our needs: user-friendly interface, responsive design, and fast loading. He's not just a contractor but a partner who offers brilliant solutions. Will definitely work with him again!",
            name: "Mark, entrepreneur"
        },
        {
            image: "Img/review (3).png",
            text: "We booked a family photoshoot with Svyatoslav and were thrilled! He doesn't just take pictures—he captures emotions and creates an atmosphere. The photos turned out heartfelt and vibrant. Highly recommend him as a true professional!",
            name: "Anna, client"
        },
        {
            image: "Img/review (4).png",
            text: "Svyatoslav shot a promo video for us, and the result exceeded expectations! He came up with a brilliant concept, expertly handled lighting and editing. The video turned out dynamic and persuasive. Will only work with him from now on!",
            name: "Serhii, client"
        },
        {
            image: "Img/review (5).png",
            text: "If you want to master game development, learn from Svyatoslav! He doesn't just teach Unity and game mechanics—he inspires you to create your own projects. Thanks to him, I launched my first 2D game!",
            name: "Ivan, student"
        },
        {
            image: "Img/review (6).png",
            text: "As a designer, Svyatoslav gives feedback that makes you want to improve, not give up. His critiques are always on point, and his advice helps elevate your work. After his courses, my portfolio became significantly stronger!",
            name: "Liza, designer"
        },
        {
            image: "Img/review (7).png",
            text: "Working on a joint project with Svyatoslav showed his attention to detail. His approach to design and code strikes the perfect balance between creativity and logic. Collaborating with him is a pleasure because he always finds the most efficient technical solutions.",
            name: "Artem, Fullstack Developer"
        }
    ],
    ua: [
        {
            image: "Img/review (1).png",
            text: "Святослав — викладач, який може пояснити складні речі просто! Завдяки його урокам з веб-розробки я створила свій перший сайт з нуля. Він не просто викладає теорію, а показує, як застосовувати знання на практиці. Дуже мотивуюче!",
            name: "Катя, студентка"
        },
        {
            image: "Img/review (2).png",
            text: "Ми працювали зі Святославом над лендінгом стартапу. Він врахував усі наші потреби: зручний інтерфейс, адаптивний дизайн та швидке завантаження. Він не просто виконавець, а партнер, який пропонує геніальні рішення. Обов'язково будемо працювати з ним знову!",
            name: "Марк, підприємець"
        },
        {
            image: "Img/review (3).png",
            text: "Ми замовили у Святослава сімейну фотосесію і були в захваті! Він не просто фотографує — він ловить емоції та створює атмосферу. Фотографії вийшли душевними та яскравими. Рекомендую його як справжнього професіонала!",
            name: "Анна, клієнтка"
        },
        {
            image: "Img/review (4).png",
            text: "Святослав знімав для нас промо-відео, і результат перевершив очікування! Він придумав геніальну концепцію, майстерно працював зі світлом та монтажем. Відео вийшло динамічним та переконливим. Тепер працюватиму тільки з ним!",
            name: "Сергій, клієнт"
        },
        {
            image: "Img/review (5).png",
            text: "Якщо хочете освоїти геймдев, вчіться у Святослава! Він не просто навчає Unity та ігровій механіці — він надихає створювати власні проекти. Завдяки йому я запустив свою першу 2D-гру!",
            name: "Іван, студент"
        },
        {
            image: "Img/review (6).png",
            text: "Як дизайнер, Святослав дає зворотний зв'язок, від якого хочеться розвиватися, а не опускати руки. Його критика завжди по суті, а поради допомагають піднести роботу на новий рівень. Після його курсів моє портфоліо стало значно сильнішим!",
            name: "Ліза, дизайнерка"
        },
        {
            image: "Img/review (7).png",
            text: "Робота над спільним проектом зі Святославом показала його увагу до деталей. Його підхід до дизайну та коду знаходить ідеальний баланс між креативністю та логікою. З ним приємно співпрацювати, бо він завжди знаходить найефективніші технічні рішення.",
            name: "Артем, Fullstack розробник"
        }
    ],
    de: [
        {
            image: "Img/review (1).png",
            text: "Svyatoslav ist ein Lehrer, der komplexe Dinge einfach erklären kann! Dank seiner Webentwicklungs-Lektionen habe ich meine erste Website von Grund auf erstellt. Er lehrt nicht nur Theorie, sondern zeigt, wie man Wissen in der Praxis anwendet. Sehr motivierend!",
            name: "Katya, Studentin"
        },
        {
            image: "Img/review (2).png",
            text: "Wir haben mit Svyatoslav an einer Startup-Landingpage gearbeitet. Er hat alle unsere Bedürfnisse berücksichtigt: benutzerfreundliche Oberfläche, responsives Design und schnelle Ladezeiten. Er ist nicht nur ein Auftragnehmer, sondern ein Partner, der brillante Lösungen anbietet. Werden definitiv wieder mit ihm arbeiten!",
            name: "Mark, Unternehmer"
        },
        {
            image: "Img/review (3).png",
            text: "Wir haben ein Familien-Fotoshooting bei Svyatoslav gebucht und waren begeistert! Er macht nicht nur Fotos – er fängt Emotionen ein und schafft Atmosphäre. Die Fotos wurden herzlich und lebendig. Empfehle ihn als wahren Profi!",
            name: "Anna, Kundin"
        },
        {
            image: "Img/review (4).png",
            text: "Svyatoslav hat ein Promotion-Video für uns gedreht, und das Ergebnis übertraf die Erwartungen! Er entwickelte ein brillantes Konzept und ging geschickt mit Beleuchtung und Schnitt um. Das Video wurde dynamisch und überzeugend. Werde ab jetzt nur noch mit ihm arbeiten!",
            name: "Serhii, Kunde"
        },
        {
            image: "Img/review (5).png",
            text: "Wenn Sie Spieleentwicklung meistern möchten, lernen Sie von Svyatoslav! Er lehrt nicht nur Unity und Spielmechanik – er inspiriert Sie, eigene Projekte zu erstellen. Dank ihm habe ich mein erstes 2D-Spiel gestartet!",
            name: "Ivan, Student"
        },
        {
            image: "Img/review (6).png",
            text: "Als Designer gibt Svyatoslav Feedback, das einen verbessern lässt, anstatt aufzugeben. Seine Kritik ist immer treffend, und sein Rat hilft, die Arbeit zu verbessern. Nach seinen Kursen wurde mein Portfolio deutlich stärker!",
            name: "Liza, Designerin"
        },
        {
            image: "Img/review (7).png",
            text: "Die Arbeit an einem gemeinsamen Projekt mit Svyatoslav zeigte seine Aufmerksamkeit für Details. Sein Ansatz für Design und Code findet die perfekte Balance zwischen Kreativität und Logik. Mit ihm zu arbeiten ist ein Vergnügen, weil er immer die effizientesten technischen Lösungen findet.",
            name: "Artem, Fullstack-Entwickler"
        }
    ]
};

let currentLanguage = 'eng';

function getCurrentLanguageFromTranslator() {
    if (window.translator && window.translator.currentLanguage) {
        return window.translator.currentLanguage;
    }
    
    const savedLang = localStorage.getItem('preferred-language');
    if (savedLang && reviewsData[savedLang]) {
        return savedLang;
    }
    
    const langSelect = document.getElementById('lang-select');
    if (langSelect && langSelect.value && reviewsData[langSelect.value]) {
        return langSelect.value;
    }
    
    return 'eng';
}

document.addEventListener('DOMContentLoaded', function() {
    const reviewImage = document.getElementById('review_image');
    const reviewText = document.getElementById('review_txt');
    const reviewName = document.getElementById('review_nick');
    const langSelect = document.getElementById('lang-select');
    
    currentLanguage = getCurrentLanguageFromTranslator();
    
    function updateReview(index) {
        const reviewBlock = document.querySelector('.review_main_block');
        if (reviewImage) reviewImage.style.opacity = '0';
        if (reviewText) reviewText.style.opacity = '0';
        if (reviewName) reviewName.style.opacity = '0';

        setTimeout(() => {
            const currentReviewsData = reviewsData[currentLanguage];
            if (currentReviewsData && currentReviewsData[index]) {
                if (reviewImage) {
                    reviewImage.src = currentReviewsData[index].image;
                    reviewImage.style.opacity = '1';
                }
                if (reviewText) {
                    reviewText.textContent = currentReviewsData[index].text;
                    reviewText.style.opacity = '1';
                }
                if (reviewName) {
                    reviewName.innerHTML = `<b>${currentReviewsData[index].name}</b>`;
                    reviewName.style.opacity = '1';
                }
            }
        }, 300);
    }
    
    function changeLanguage(newLanguage) {
        if (reviewsData[newLanguage]) {
            currentLanguage = newLanguage;
            const activeButton = document.querySelector('.active_review_btn');
            if (activeButton) {
                const buttonIndex = parseInt(activeButton.id.split('_')[1]) - 1;
                updateReview(buttonIndex);
            } else {
                updateReview(0);
            }
        }
    }
    
    if (langSelect) {
        langSelect.addEventListener('change', function() {
            changeLanguage(this.value);
        });
    }
    
    let lastKnownLanguage = currentLanguage;
    const languageWatcher = setInterval(() => {
        const newLanguage = getCurrentLanguageFromTranslator();
        if (newLanguage !== lastKnownLanguage) {
            lastKnownLanguage = newLanguage;
            changeLanguage(newLanguage);
        }
    }, 100);
    
    for (let i = 1; i <= 7; i++) {
        const button = document.getElementById(`review_${i}`);
        
        if (button) {
            if (i === 1) {
                button.classList.add('active_review_btn');
            }
            
            button.addEventListener('click', function() {
                document.querySelectorAll('.review_btn').forEach(btn => {
                    btn.classList.remove('active_review_btn');
                });
                this.classList.add('active_review_btn');
                updateReview(i - 1);
            });
        }
    }
    
    updateReview(0);
    
    window.addEventListener('beforeunload', () => {
        clearInterval(languageWatcher);
    });
});

function setLanguage(language) {
    if (reviewsData[language]) {
        currentLanguage = language;
        const langSelect = document.getElementById('lang-select');
        if (langSelect) {
            langSelect.value = language;
        }
        const activeButton = document.querySelector('.active_review_btn');
        if (activeButton) {
            const buttonIndex = parseInt(activeButton.id.split('_')[1]) - 1;
            
        }
    }
}

window.setReviewLanguage = setLanguage;